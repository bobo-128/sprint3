---
name: '가이드라인 템플릿 '
about: 가이드라인
title: ''
labels: ''
assignees: ''

---

## 📝 5일차 실습 가이드라인: Prisma + Express 기반 

---

## 🚀 1일차: 환경 설정 및 핵심 CRUD API 구현 (11시간)

### 📌 목표

프로젝트 환경 설정, **Prisma 스키마** 및 마이그레이션 완료, 주요 리소스(**Product, Article**)의 기본 CRUD API 구현.

|**주요 작업**|**구체적인 구현 지침 (Instructions)**|
|---|---|
|**Prisma 초기 설정**|1. `npm init -y` 후 `express`, `dotenv`, **`prisma`**, **`@prisma/client`** 설치.<br><br>  <br><br>2. `npx prisma init`을 실행하여 `prisma` 폴더와 `schema.prisma` 파일 생성.<br><br>  <br><br>3. `.env` 파일에 **`DATABASE_URL`** (PostgreSQL 접속 정보) 설정 및 `PORT` 정의.|
|**Prisma 스키마 정의 및 시딩**|1. `schema.prisma` 파일에 **`Product`** 및 **`Article`** 모델을 정의합니다 (필수 필드: `id`, `name`/`title`, `description`/`content`, `price`, `tags`, `createdAt`, `updatedAt`).<br><br>  <br><br>2. **마이그레이션:** `npx prisma migrate dev --name init` 실행하여 DB에 테이블 생성.<br><br>  <br><br>3. **시딩 코드:** `prisma/seed.js` 파일에 **`PrismaClient`**를 사용하여 더미 데이터 삽입 로직 작성 및 실행 테스트.|
|**라우팅 및 CRUD 구현**|1. `PrismaClient`를 초기화하고 DB 작업을 전담하는 서비스 계층(`services/product.service.js` 등)을 구성.<br><br>  <br><br>2. 라우트 파일(`routes/products.js`, `routes/articles.js`)을 별도로 생성하고 `express.Router()` 인스턴스 정의.<br><br>  <br><br>3. **라우트 중복 제거:** `router.route('/')`와 `router.route('/:id')`를 사용하여 경로 통합.<br><br>  <br><br>4. 

---

## ✅ 2일차: 유효성 검증, 에러 핸들링 및 목록 조회 (11시간)

### 📌 목표

유효성 검증 미들웨어, 전역 에러 핸들링 구현, **Offset 페이지네이션**을 포함한 목록 조회 기능 구현.

|**주요 작업**|**구체적인 구현 지침 (Instructions)**|
|---|---|
|**유효성 검증 미들웨어**|1. 미들웨어 파일(`middlewares/validator.js`) 작성.<br><br>  <br><br>2. **`validateProductInfo`** 및 **`validateArticleInfo`** 함수 구현. (필수 필드 누락, 데이터 타입 검증 등)<br><br>  <br><br>3. 검증 실패 시 **`400 Bad Request`** 상태 코드를 가진 `ValidationError` 객체를 **`next()`** 함수로 전달.|
|**전역 에러 처리 완성**|1. 커스텀 에러 클래스(`utils/CustomError.js`)를 정의하고 `statusCode`를 포함. (**ValidationError, NotFoundError** 정의)<br><br>  <br><br>2. 에러 핸들러 미들웨어(`middlewares/errorHandler.js`)를 `app.js`의 **가장 마지막**에 등록.<br><br>  <br><br>3. 에러 핸들러에서 에러 유형(`instanceof CustomError`)을 확인하여 **400, 404, 500** 등에 맞는 상태 코드와 JSON 응답을 리턴.|
|**기본 목록 조회 및 페이지네이션**|1. **`getProductList`**, **`getArticleList`** 서비스 및 컨트롤러 함수 구현.<br><br>  <br><br>2. 쿼리 파라미터 `limit`와 `offset`을 추출하여 Prisma의 **`.findMany()`** 메서드에 **`take: limit`, `skip: offset`** 옵션 적용.<br><br>  <br><br>3. **최신순 정렬:** `orderBy: { createdAt: 'desc' }` 옵션을 적용.<br><br>  <br><br>4. 전체 개수 응답을 위해 **`.count()`** 메서드를 함께 사용하여 `totalCount`를 반환.|

---

## 📑 3일차: 댓글 기능 및 검색 기능 구현 (10시간)

### 📌 목표

댓글 스키마 설계 및 관계 설정, 댓글 CRUD 구현, 메인 목록 API에 검색 기능 추가.

|**주요 작업**|**구체적인 구현 지침 (Instructions)**|
|---|---|
|**댓글 스키마 및 관계 설정**|1. `schema.prisma`에 **`Comment`** 모델 정의 (필드: `content`).<br><br>  <br><br>2. `Comment` 모델에 **`productId`**, **`articleId`** 외래 키 필드를 추가하고 `@relation` 어노테이션으로 연결.<br><br>  <br><br>3. `@relation`에 **`onDelete: Cascade`** 옵션을 명시하여 부모 삭제 시 댓글이 자동 삭제되도록 설정.<br><br>  <br><br>4. 마이그레이션 실행 (`npx prisma migrate dev`).|
|**댓글 등록 및 수정/삭제**|1. 컨트롤러(`comment.controller.js`)에 **`createProductComment`**, **`createArticleComment`** 함수 구현.<br><br>  <br><br>2. **등록:** `prisma.comment.create({ data: { content, productId: id } })` 등 Prisma 쿼리 사용.<br><br>  <br><br>3. 댓글 수정 (PATCH) 및 삭제 API 구현. (삭제/수정 시 리소스 존재 여부 404 처리 포함)|
|**검색 기능 추가**|1. **`getProductList`** 및 **`getArticleList`** 서비스 로직 수정.<br><br>  <br><br>2. 쿼리 파라미터 `search`를 추출.<br><br>  <br><br>3. Prisma의 **`where`** 절을 사용하여 **`OR`** 조건과 **`contains`** 필터(`mode: 'insensitive'`와 함께 사용 권장)를 적용하여 검색 기능 구현.|

---

## 🖼️ 4일차: 이미지 업로드 및 Cursor 페이지네이션 (11시간)

### 📌 목표

Multer를 사용한 파일 업로드 기능 구현 및 댓글 목록에 **Cursor 기반 페이지네이션** 적용.

|**주요 작업**|**구체적인 구현 지침 (Instructions)**|
|---|---|
|**이미지 업로드 API 구현**|1. `multer` 설치 및 설정 파일(`config/multer.js`) 작성.<br><br>  <br><br>2. **`diskStorage`**를 사용하여 서버에 파일 저장 설정 (`uploads` 폴더 등) 및 **`fileFilter`**를 이용한 이미지 파일 필터링 로직 구현.<br><br>  <br><br>3. 라우터(`routes/upload.js`)에 **`upload.single('image')`** 미들웨어를 사용하는 `POST /upload/image` API 구현.<br><br>  <br><br>4. `req.file` 객체의 정보를 활용하여 저장된 이미지의 **URL 경로**를 응답으로 반환.|
|**댓글 목록 및 Cursor 페이지네이션**|1. **`getProductComments`**, **`getArticleComments`** 서비스 함수 구현.<br><br>  <br><br>2. 쿼리 파라미터에서 **`cursorId`** (이전 페이지 마지막 댓글의 ID)를 추출.<br><br>  <br><br>3. Prisma의 **`.findMany()`**에 **`cursor: { id: cursorId }`**, **`skip: 1`** (커서 아이템 건너뛰기), **`take: limit`** 옵션을 사용하여 Cursor 기반 페이지네이션 구현.|

---

## 🌐 5일차: 최종 점검 및 배포 (11시간)

### 📌 목표

전체 코드 통합 테스트, 에러 핸들링 완성, 환경 설정 마무리 및 **Render.com** 배포.

|**주요 작업**|**구체적인 구현 지침 (Instructions)**|
|---|---|
|**통합 테스트 및 디버깅**|1. Postman 등을 사용하여 모든 API 기능(CRUD, 댓글, 검색, 페이지네이션) **종합 테스트** 수행.<br><br>  <br><br>2. **에러 핸들러**가 4xx, 5xx 에러를 일관적으로 처리하는지 최종 점검.<br><br>  <br><br>3. **Prisma 관계** 및 **`onDelete: Cascade`** 설정이 정상 동작하는지 테스트.|
|**배포 환경 설정**|1. **`package.json`**에 `start` 명령어를 정의.<br><br>  <br><br>2. **Render.com** 배포 설정에 맞게 환경 변수(`DATABASE_URL` 등)를 최종 점검.|
|**서비스 배포**|1. **Render.com**에 PostgreSQL 인스턴스 및 Web Service 생성.<br><br>  <br><br>2. Web Service의 빌드 명령에 **`npx prisma migrate deploy`**를 포함하여 배포 시점에 DB 스키마가 적용되도록 설정.<br><br>  <br><br>3. 배포된 URL을 통해 API가 정상 동작하는지 최종 테스트.|
